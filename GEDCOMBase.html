<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=US-ASCII" http-equiv="Content-Type">

<title>class GEDCOMBase - gedcom-0.9.3 Documentation</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/gedcom/gedcom_base.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link"><a href="Object.html">Object</a>
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-new">::new</a>
    
    <li><a href="#method-c-no_tabs">::no_tabs</a>
    
    <li><a href="#method-c-tabs">::tabs</a>
    
    <li><a href="#method-i-changed">#changed</a>
    
    <li><a href="#method-i-changed-3F">#changed?</a>
    
    <li><a href="#method-i-created-3F">#created?</a>
    
    <li><a href="#method-i-find">#find</a>
    
    <li><a href="#method-i-locked-3F">#locked?</a>
    
    <li><a href="#method-i-private-3F">#private?</a>
    
    <li><a href="#method-i-save">#save</a>
    
    <li><a href="#method-i-to_db">#to_db</a>
    
    <li><a href="#method-i-to_gedcom">#to_gedcom</a>
    
    <li><a href="#method-i-to_s">#to_s</a>
    
    <li><a href="#method-i-to_s_ordered">#to_s_ordered</a>
    
    <li><a href="#method-i-to_s_r">#to_s_r</a>
    
    <li><a href="#method-i-token_to_s">#token_to_s</a>
    
    <li><a href="#method-i-xref_check">#xref_check</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="./History_txt.html">History</a>
  
    <li class="file"><a href="./Manifest_txt.html">Manifest</a>
  
    <li class="file"><a href="./README_txt.html">README</a>
  
    <li class="file"><a href="./test_data/README_txt.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./Address_record.html">Address_record</a>
  
    <li><a href="./Adoption_record.html">Adoption_record</a>
  
    <li><a href="./Association_record.html">Association_record</a>
  
    <li><a href="./Bit.html">Bit</a>
  
    <li><a href="./Btree.html">Btree</a>
  
    <li><a href="./Btree_data.html">Btree_data</a>
  
    <li><a href="./Btree_node.html">Btree_node</a>
  
    <li><a href="./Cause_record.html">Cause_record</a>
  
    <li><a href="./Change_date_record.html">Change_date_record</a>
  
    <li><a href="./Character_set_record.html">Character_set_record</a>
  
    <li><a href="./Chart.html">Chart</a>
  
    <li><a href="./Citation_data_record.html">Citation_data_record</a>
  
    <li><a href="./Citation_event_type_record.html">Citation_event_type_record</a>
  
    <li><a href="./ClassTracker.html">ClassTracker</a>
  
    <li><a href="./Copyright_record.html">Copyright_record</a>
  
    <li><a href="./Corporate_record.html">Corporate_record</a>
  
    <li><a href="./Date_record.html">Date_record</a>
  
    <li><a href="./Decendant.html">Decendant</a>
  
    <li><a href="./Encoded_line_record.html">Encoded_line_record</a>
  
    <li><a href="./Event_age_record.html">Event_age_record</a>
  
    <li><a href="./Event_record.html">Event_record</a>
  
    <li><a href="./Events_list_record.html">Events_list_record</a>
  
    <li><a href="./Families_individuals.html">Families_individuals</a>
  
    <li><a href="./Family_record.html">Family_record</a>
  
    <li><a href="./GEDCOMBase.html">GEDCOMBase</a>
  
    <li><a href="./GedLine.html">GedLine</a>
  
    <li><a href="./GedString.html">GedString</a>
  
    <li><a href="./Gedcom.html">Gedcom</a>
  
    <li><a href="./GedcomParser.html">GedcomParser</a>
  
    <li><a href="./Gedcom_record.html">Gedcom_record</a>
  
    <li><a href="./Header_data_record.html">Header_data_record</a>
  
    <li><a href="./Header_record.html">Header_record</a>
  
    <li><a href="./Header_source_record.html">Header_source_record</a>
  
    <li><a href="./Individual_attribute_record.html">Individual_attribute_record</a>
  
    <li><a href="./Individual_record.html">Individual_record</a>
  
    <li><a href="./Instruction.html">Instruction</a>
  
    <li><a href="./Multimedia_citation_record.html">Multimedia_citation_record</a>
  
    <li><a href="./Multimedia_file_record.html">Multimedia_file_record</a>
  
    <li><a href="./Multimedia_format_record.html">Multimedia_format_record</a>
  
    <li><a href="./Multimedia_obje_file_record.html">Multimedia_obje_file_record</a>
  
    <li><a href="./Multimedia_obje_format_record.html">Multimedia_obje_format_record</a>
  
    <li><a href="./Multimedia_record.html">Multimedia_record</a>
  
    <li><a href="./Name_phonetic_record.html">Name_phonetic_record</a>
  
    <li><a href="./Name_record.html">Name_record</a>
  
    <li><a href="./Name_romanized_record.html">Name_romanized_record</a>
  
    <li><a href="./Note_citation_record.html">Note_citation_record</a>
  
    <li><a href="./Note_record.html">Note_record</a>
  
    <li><a href="./Object.html">Object</a>
  
    <li><a href="./PEDIGREE_WIDTH.html">PEDIGREE_WIDTH</a>
  
    <li><a href="./ParseState.html">ParseState</a>
  
    <li><a href="./Place_record.html">Place_record</a>
  
    <li><a href="./Placename_map_record.html">Placename_map_record</a>
  
    <li><a href="./Placename_phonetic_record.html">Placename_phonetic_record</a>
  
    <li><a href="./Placename_romanized_record.html">Placename_romanized_record</a>
  
    <li><a href="./Refn_record.html">Refn_record</a>
  
    <li><a href="./Repository_caln.html">Repository_caln</a>
  
    <li><a href="./Repository_citation_record.html">Repository_citation_record</a>
  
    <li><a href="./Repository_record.html">Repository_record</a>
  
    <li><a href="./Source_citation_record.html">Source_citation_record</a>
  
    <li><a href="./Source_record.html">Source_record</a>
  
    <li><a href="./Source_scope_record.html">Source_scope_record</a>
  
    <li><a href="./Submission_record.html">Submission_record</a>
  
    <li><a href="./Submitter_record.html">Submitter_record</a>
  
    <li><a href="./Text_record.html">Text_record</a>
  
    <li><a href="./Trailer_record.html">Trailer_record</a>
  
    <li><a href="./Transmission.html">Transmission</a>
  
    <li><a href="./TransmissionBase.html">TransmissionBase</a>
  
    <li><a href="./Xref.html">Xref</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class GEDCOMBase</h1>

  <div id="description" class="description">
    
<p>base routines shared by all gedcom objects.</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <!-- Attributes -->
    <section id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="attribute-i-restriction" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">restriction</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>Restriction records only exist in some GEDCOM record types, and we do honor
that. Internally though, my DB allows any record to be restricted, hence
this global use of :restriction.</p>
        
        </div>
      </div>
      
    </section><!-- attribute-method-details -->
    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(transmission = nil, changed=true,created=true)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Create a new <a href="GEDCOMBase.html">GEDCOMBase</a> or most likely a
subclass of <a href="GEDCOMBase.html">GEDCOMBase</a>.</p>
<ul><li>
<p>transmission is the current transmission this object came from. This is
useful in searchs of the transmission, starting from a reference in a
record in that transmission.</p>
</li><li>
<p>changed indicates that we have altered the data in the record The default
is true, as the normal instantiation is creating a new record. <a
href="GEDCOMBase.html#method-i-to_db">#to_db</a> uses this to determine if
the record needs to be saved to the DB.</p>
</li><li>
<p>created indicates that this is a new record, rather than one we may have
loaded from a DB.</p>
</li></ul>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/gedcom/gedcom_base.rb, line 18</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">transmission</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">changed</span>=<span class="ruby-keyword">true</span>,<span class="ruby-identifier">created</span>=<span class="ruby-keyword">true</span>)
  <span class="ruby-ivar">@changed</span> = <span class="ruby-identifier">changed</span>
  <span class="ruby-ivar">@created</span> = <span class="ruby-identifier">created</span>
  <span class="ruby-ivar">@this_level</span> = []
  <span class="ruby-ivar">@sub_level</span> = []
  <span class="ruby-ivar">@transmission</span> = <span class="ruby-identifier">transmission</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
      <div id="method-c-no_tabs" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">no_tabs</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>sets @@tabs to false. This is the default as a lot of GEDCOM parsers don't
like leading white space on lines.</p>
          

          
          <div class="method-source-code" id="no_tabs-source">
            <pre><span class="ruby-comment"># File lib/gedcom/gedcom_base.rb, line 37</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">no_tabs</span>
  <span class="ruby-identifier">@@tabs</span> = <span class="ruby-keyword">false</span> <span class="ruby-comment">#The default</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- no_tabs-source -->
          
        </div>

        

        
      </div><!-- no_tabs-method -->

    
      <div id="method-c-tabs" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">tabs</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>sets @@tabs to true. This indents gedcom lines on output a tab per level. 
This is useful if pretty printing, but not normal in a gedcom file  as most
GEDCOM file parsers don't like leading tabs on lines of a transmission
file. I use this only for debugging.</p>
          

          
          <div class="method-source-code" id="tabs-source">
            <pre><span class="ruby-comment"># File lib/gedcom/gedcom_base.rb, line 31</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">tabs</span>
  <span class="ruby-identifier">@@tabs</span> = <span class="ruby-keyword">true</span> 
<span class="ruby-keyword">end</span></pre>
          </div><!-- tabs-source -->
          
        </div>

        

        
      </div><!-- tabs-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-changed" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">changed</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Marks this object as having been altered so we know to synchronise it with
the DB.</p>
          

          
          <div class="method-source-code" id="changed-source">
            <pre><span class="ruby-comment"># File lib/gedcom/gedcom_base.rb, line 42</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">changed</span>
  <span class="ruby-ivar">@changed</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- changed-source -->
          
        </div>

        

        
      </div><!-- changed-method -->

    
      <div id="method-i-changed-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">changed?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Tests for this object having been altered, so we know to synchronise it
with the DB.</p>
          

          
          <div class="method-source-code" id="changed-3F-source">
            <pre><span class="ruby-comment"># File lib/gedcom/gedcom_base.rb, line 47</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">changed?</span>
  <span class="ruby-ivar">@changed</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- changed-3F-source -->
          
        </div>

        

        
      </div><!-- changed-3F-method -->

    
      <div id="method-i-created-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">created?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Tests to see if this is a new object, not one we have loaded from elsewhere
(say a DB)</p>
          

          
          <div class="method-source-code" id="created-3F-source">
            <pre><span class="ruby-comment"># File lib/gedcom/gedcom_base.rb, line 52</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">created?</span>
  <span class="ruby-ivar">@created</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- created-3F-source -->
          
        </div>

        

        
      </div><!-- created-3F-method -->

    
      <div id="method-i-find" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">find</span><span
            class="method-args">(*a)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Find a XREF within this transmission. All classes inheriting from <a
href="GEDCOMBase.html">GEDCOMBase</a> record the parent transmission
object.</p>
          

          
          <div class="method-source-code" id="find-source">
            <pre><span class="ruby-comment"># File lib/gedcom/gedcom_base.rb, line 91</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">find</span>(*<span class="ruby-identifier">a</span>)
  <span class="ruby-ivar">@transmission</span>.<span class="ruby-identifier">find</span>(*<span class="ruby-identifier">a</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@transmission</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- find-source -->
          
        </div>

        

        
      </div><!-- find-method -->

    
      <div id="method-i-locked-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">locked?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Test for a Restriction notice for a locked record. Locked records mean that
the data is known to be correct, so shouldn't be  altered without checking
with the original source of the data.</p>
          

          
          <div class="method-source-code" id="locked-3F-source">
            <pre><span class="ruby-comment"># File lib/gedcom/gedcom_base.rb, line 104</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">locked?</span>
  (<span class="ruby-ivar">@restriction</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@restriction</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;locked&quot;</span>) <span class="ruby-operator">?</span> <span class="ruby-keyword">true</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- locked-3F-source -->
          
        </div>

        

        
      </div><!-- locked-3F-method -->

    
      <div id="method-i-private-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">private?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Test for a Restriction notice for privacy People may request that a records
contents not be available for public consumption.</p>
          

          
          <div class="method-source-code" id="private-3F-source">
            <pre><span class="ruby-comment"># File lib/gedcom/gedcom_base.rb, line 97</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">private?</span>
  (<span class="ruby-ivar">@restriction</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@restriction</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;privacy&quot;</span>) <span class="ruby-operator">?</span> <span class="ruby-keyword">true</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- private-3F-source -->
          
        </div>

        

        
      </div><!-- private-3F-method -->

    
      <div id="method-i-save" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">save</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>This is the default method, used by all classes inheriting from <a
href="GEDCOMBase.html">GEDCOMBase</a>, to recursively save the object and
its sub-records to a DB. All subclasses of <a
href="GEDCOMBase.html">GEDCOMBase</a> are expected to define @this_level
and @sub_level arrays, which are instructions to <a
href="GEDCOMBase.html#method-i-to_db">#to_db</a> on how to generate GEDCOM
lines from the attributes of the object.</p>
          

          
          <div class="method-source-code" id="save-source">
            <pre><span class="ruby-comment"># File lib/gedcom/gedcom_base.rb, line 86</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">save</span>
  <span class="ruby-identifier">to_db</span>( <span class="ruby-identifier">level</span>, <span class="ruby-ivar">@this_level</span>, <span class="ruby-ivar">@sub_level</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- save-source -->
          
        </div>

        

        
      </div><!-- save-method -->

    
      <div id="method-i-to_db" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_db</span><span
            class="method-args">(level = 0, this_level=[], sub_levels=[])</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Need to flesh this out. Right now it pretends to work and marks records as
saved.</p>
          

          
          <div class="method-source-code" id="to_db-source">
            <pre><span class="ruby-comment"># File lib/gedcom/gedcom_base.rb, line 71</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_db</span>(<span class="ruby-identifier">level</span> = <span class="ruby-value">0</span>, <span class="ruby-identifier">this_level</span>=[], <span class="ruby-identifier">sub_levels</span>=[])
  <span class="ruby-ivar">@changed</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@created</span> = <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_db-source -->
          
        </div>

        

        
      </div><!-- to_db-method -->

    
      <div id="method-i-to_gedcom" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_gedcom</span><span
            class="method-args">(level = 0)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>This is the default method, used by all classes inheriting from <a
href="GEDCOMBase.html">GEDCOMBase</a>, to recursively generate GEDCOM lines
from that <a href="Object.html">Object</a> downward. All subclasses of <a
href="GEDCOMBase.html">GEDCOMBase</a> are expected to define @this_level
and @sub_level arrays, which are instructions to <a
href="GEDCOMBase.html#method-i-to_s_r">#to_s_r</a> on how to generate
GEDCOM lines from the attributes of the object.</p>
          

          
          <div class="method-source-code" id="to_gedcom-source">
            <pre><span class="ruby-comment"># File lib/gedcom/gedcom_base.rb, line 79</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_gedcom</span>(<span class="ruby-identifier">level</span> = <span class="ruby-value">0</span>)
  <span class="ruby-identifier">to_s_r</span>( <span class="ruby-identifier">level</span>, <span class="ruby-ivar">@this_level</span>, <span class="ruby-ivar">@sub_level</span> )
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_gedcom-source -->
          
        </div>

        

        
      </div><!-- to_gedcom-method -->

    
      <div id="method-i-to_s" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_s</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>create a string from the objects instance variables, one per line, in the
form "variable = valuen" ... . For an ordered list, see <a
href="GEDCOMBase.html#method-i-to_s_ordered">#to_s_ordered</a></p>
          

          
          <div class="method-source-code" id="to_s-source">
            <pre><span class="ruby-comment"># File lib/gedcom/gedcom_base.rb, line 58</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_s</span>
  <span class="ruby-comment">#This might seem a little obscure, but this will find and print the attributes with get methods defined,</span>
  <span class="ruby-comment">#not having prior knowledge of what those attributes are.</span>
  <span class="ruby-identifier">s</span> = <span class="ruby-string">''</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">instance_variables</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-comment">#look at each of the instance variables</span>
    <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">method_defined?</span>(<span class="ruby-identifier">v_sym</span> = <span class="ruby-identifier">v</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">to_sym</span>) <span class="ruby-comment">#see if there is a method defined for this symbol (strip the :)</span>
      <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;#{v} = &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">pv_byname</span>(<span class="ruby-identifier">v_sym</span>).<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span> <span class="ruby-comment">#print it</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">s</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_s-source -->
          
        </div>

        

        
      </div><!-- to_s-method -->

    
      <div id="method-i-token_to_s" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">token_to_s</span><span
            class="method-args">(token)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>All our values are stored as arrays of words. This is quite useful in word
wrapping of NOTES, TEXT, etc, and further parsing records like dates. It
isn't really that helpful when we want to use a value as a string. This is
a utility function to join the words into a space separated string.</p>
          

          
          <div class="method-source-code" id="token_to_s-source">
            <pre><span class="ruby-comment"># File lib/gedcom/gedcom_base.rb, line 110</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">token_to_s</span>(<span class="ruby-identifier">token</span>)
  <span class="ruby-identifier">token</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- token_to_s-source -->
          
        </div>

        

        
      </div><!-- token_to_s-method -->

    
    </section><!-- public-instance-method-details -->
  
     <section id="protected-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Protected Instance Methods</h3>

    
      <div id="method-i-to_s_ordered" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_s_ordered</span><span
            class="method-args">(variable_list)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="GEDCOMBase.html#method-i-to_s">#to_s</a> with the variable list
(as symbols) passed to it in the order they are to be printed</p>
          

          
          <div class="method-source-code" id="to_s_ordered-source">
            <pre><span class="ruby-comment"># File lib/gedcom/gedcom_base.rb, line 289</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_s_ordered</span>(<span class="ruby-identifier">variable_list</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">variable_list</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">s</span> = <span class="ruby-string">''</span>
    <span class="ruby-identifier">variable_list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;@#{v} = &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">pv_byname</span>(<span class="ruby-identifier">v</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">s</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-string">''</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_s_ordered-source -->
          
        </div>

        

        
      </div><!-- to_s_ordered-method -->

    
      <div id="method-i-to_s_r" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_s_r</span><span
            class="method-args">(level = 0, this_level=[], sub_levels=[])</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>recursive to_s. We want to print this object and its sub-records. the
definition of how we want to print and when to recurse, is in the
this_level and sub_level arrays. These have the form [ [ action, tag,
data_source ],...] (see to_s_r_action )</p>
          

          
          <div class="method-source-code" id="to_s_r-source">
            <pre><span class="ruby-comment"># File lib/gedcom/gedcom_base.rb, line 305</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_s_r</span>(<span class="ruby-identifier">level</span> = <span class="ruby-value">0</span>, <span class="ruby-identifier">this_level</span>=[], <span class="ruby-identifier">sub_levels</span>=[])
  <span class="ruby-identifier">s_out</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-identifier">this_level</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">l</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">this_level_instruction</span> = <span class="ruby-constant">Instruction</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">l</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">this_level_instruction</span>.<span class="ruby-identifier">data</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">data</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">send</span>( <span class="ruby-identifier">this_level_instruction</span>.<span class="ruby-identifier">data</span> ) <span class="ruby-comment">#gets the contents using the symbol, and sending &quot;self&quot; a message</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">data</span> =  [<span class="ruby-constant">GedString</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">''</span>)]
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">data</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span class="ruby-comment">#could be if the self.send targets a variable that doesn't exist.</span>
      <span class="ruby-identifier">data</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">data_instance</span><span class="ruby-operator">|</span> 
        <span class="ruby-identifier">s_out</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">to_s_r_action</span>(<span class="ruby-identifier">level</span>, <span class="ruby-identifier">this_level_instruction</span>.<span class="ruby-identifier">action</span>, <span class="ruby-identifier">this_level_instruction</span>.<span class="ruby-identifier">tag</span>, <span class="ruby-identifier">data_instance</span>)
      
        <span class="ruby-identifier">sub_levels</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sl</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">sub_level_instruction</span> = <span class="ruby-constant">Instruction</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">sl</span>)
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">sub_level_instruction</span>.<span class="ruby-identifier">data</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
            <span class="ruby-identifier">sub_level_data</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">send</span>( <span class="ruby-identifier">sub_level_instruction</span>.<span class="ruby-identifier">data</span> ) <span class="ruby-comment">#gets the contents using the symbol, and sending &quot;self&quot; a message</span>
          <span class="ruby-keyword">else</span>
             <span class="ruby-identifier">sub_level_data</span> = [<span class="ruby-constant">GedString</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">''</span>)]
          <span class="ruby-keyword">end</span>
          
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">sub_level_data</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>  <span class="ruby-comment">#could be if the self.send targets a variable that doesn't exist.</span>
            <span class="ruby-identifier">sub_level_data</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sub_data_instance</span><span class="ruby-operator">|</span> 
              <span class="ruby-identifier">s_out</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">to_s_r_action</span>(<span class="ruby-identifier">level</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>, <span class="ruby-identifier">sub_level_instruction</span>.<span class="ruby-identifier">action</span>, <span class="ruby-identifier">sub_level_instruction</span>.<span class="ruby-identifier">tag</span>, <span class="ruby-identifier">sub_data_instance</span> )
            <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">s_out</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_s_r-source -->
          
        </div>

        

        
      </div><!-- to_s_r-method -->

    
      <div id="method-i-xref_check" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">xref_check</span><span
            class="method-args">( level, tag, xref )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>validate that the record referenced by the XREF actually exists in this
transmission. Genearte a warning if it does not. It does not stop the
processing of this line.</p>
          

          
          <div class="method-source-code" id="xref_check-source">
            <pre><span class="ruby-comment"># File lib/gedcom/gedcom_base.rb, line 277</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">xref_check</span>( <span class="ruby-identifier">level</span>, <span class="ruby-identifier">tag</span>, <span class="ruby-identifier">xref</span> )
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">xref</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Xref</span>
    <span class="ruby-identifier">print</span> <span class="ruby-node">&quot;#{level+1} XREF_CHECK ****************#{level}, #{tag}. #{xref.class} != Xref?\n&quot;</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@transmission</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@transmission</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">xref</span>.<span class="ruby-identifier">index</span>, <span class="ruby-identifier">xref</span>.<span class="ruby-identifier">xref_value</span>) <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-comment">#Warning message that reference points to an unknown target.</span>
    <span class="ruby-identifier">print</span> <span class="ruby-node">&quot;#{level+1} NOTE ****************#{level}, #{tag} Key not found: #{xref.index} #{xref.xref_value}\n&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- xref_check-source -->
          
        </div>

        

        
      </div><!-- xref_check-method -->

    
    </section><!-- protected-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

